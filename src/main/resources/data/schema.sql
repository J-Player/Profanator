CREATE TABLE Proficiency (
	id INTEGER PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(255) UNIQUE
);

CREATE TABLE Item (
	id INTEGER PRIMARY KEY AUTO_INCREMENT,
	proficiency VARCHAR(255),
	name VARCHAR(255) NOT NULL UNIQUE,
	qtbyproduction INTEGER NOT NULL CHECK (qtbyproduction > 0),
	FOREIGN KEY (proficiency) REFERENCES Proficiency(name) ON UPDATE CASCADE
);

CREATE TABLE Ingredient (
	id INTEGER PRIMARY KEY AUTO_INCREMENT,
	product VARCHAR(255) NOT NULL,
	name VARCHAR(255) NOT NULL,
	quantity INTEGER NOT NULL CHECK (quantity > 0),
	FOREIGN KEY (product) REFERENCES Item(name) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (name) REFERENCES Item(name) ON DELETE CASCADE ON UPDATE CASCADE,
	UNIQUE (product, name)
);